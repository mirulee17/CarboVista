<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Analysis Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link rel="stylesheet"
          href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

    <!-- Main CSS -->
    <link rel="stylesheet" href="css/Dashboard.css">

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
          rel="stylesheet">
</head>

<body class="app">

<div class="topbar">
    <a href="AOI.html" class="back-btn">← Back</a>
    <h2>Biomass Analysis Dashboard</h2>
</div>

    <div class="dashboard-header header-row">

        <div class="header-text">
            <h3>Spatial Tree Carbon Prediction</h3>
            <p id="headerMeta">
            <span id="aoiAddress"></span> •
            <strong><span id="aoiArea"></span> km²</strong> •
            <span id="startDate"></span> → <span id="endDate"></span>
            </p>
        </div>

        <button id="downloadCsv" class="btn-secondary">
            ↓ Download CSV
        </button>
        <button id="downloadPdf" class="btn-secondary">
            ↓ Download PDF Report
        </button>


        </div>
    </div>



    <!-- PRIMARY KPI ROW -->
    <div class="kpi-row">

        <div class="kpi-card">
            <div class="kpi-title">Mean Tree Carbon</div>
            <div class="kpi-value">
                <span id="mean">–</span>
                <span class="kpi-unit">kg C</span>
            </div>
        </div>

        <div class="kpi-card">
            <div class="kpi-title">Estimated Total Carbon</div>
            <div class="kpi-value">
                <span id="total">–</span>
                <span class="kpi-unit">t C</span>
            </div>
        </div>


        <div class="kpi-card">
            <div class="kpi-title">Analysed Pixels</div>
            <div class="kpi-value">
                <span id="count">–</span>
                <span class="kpi-unit">pixels</span>
            </div>
        </div>

        <div class="kpi-card">
            <div class="kpi-title">Carbon Range</div>
            <div class="kpi-value small">
                <span id="min">–</span> – <span id="max">–</span>
                <span class="kpi-unit">kg C</span>
            </div>
        </div>

    </div>

    <!-- MAP + CHARTS -->
    <div class="viz-row">

        <div class="map-panel">
            <div id="map"></div>
        </div>

        <div class="charts-column">
            <div class="panel">
                <h4>Tree Carbon Distribution</h4>
                <canvas id="acdHistogram"></canvas>
            </div>

            <div class="panel">
                <h4>Carbon Class Breakdown</h4>
                <canvas id="acdPie"></canvas>
            </div>
        </div>

    </div>

    <!-- SECONDARY KPI ROW -->
    <div class="kpi-row kpi-secondary">

        <div class="kpi-card">
            <div class="kpi-title">Vegetated Area</div>
            <div class="kpi-value">
                <span id="vegetatedAreaKm2">–</span>
                <span class="kpi-unit">km²</span>
            </div>
            <div class="kpi-sub">
                (<span id="vegetatedAreaHa">–</span> ha)
            </div>
        </div>



        <div class="kpi-card">
            <div class="kpi-title">Carbon Density</div>
            <div class="kpi-value">
                <span id="carbonDensity">–</span>
                <span class="kpi-unit">kg C / ha</span>
            </div>
        </div>

        <div class="kpi-card">
            <div class="kpi-title">Prediction Confidence</div>
            <div class="kpi-value">
                <span id="confidenceScore">–</span>
                <!-- <span class="kpi-unit">%</span> -->
            </div>
        </div>

        <div class="kpi-card">
            <div class="kpi-title">
                Indicative Carbon Value
                <span title="Based on RM 50 per tCO₂e (reference only)">ⓘ</span>
            </div>
            <div class="kpi-value">
                <span id="carbonValue">–</span>
                <span class="kpi-unit">RM</span>
            </div>
        </div>


    </div>

</div>


<!-- JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-image/leaflet-image.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/dashboard.js"></script>


</body>
</html>
